# bazel-generated-sources

This project provides a bazel rule for collecting .go source files generated by
bazel into a `.tar` archive. These source files can be extracted to the file
system so they can be found by conventional go tooling commands like `go build`,
`go mod`.

This is primarily intended for use with `go_proto_library` targets as
discussed in https://github.com/bazel-contrib/rules_go/issues/2111.

## Usage

Use the `go_srcs_tar` to collect all the .go sources of a `go_library` into


```starlark
load("@bazel_generated_sources//:defs.bzl", "go_srcs_tar")

go_srcs_tar(
    name = "go_srcs",
    deps = [
        "//proto/greeter:greeterpb_go_proto",
    ]
)
```

Build the .tar and extract it

```shell
bazel build :go_srcs.tar
mkdir -p /tmp/go/pkg
tar -xf bazel-bin/go_srcs.tar -C /tmp/go/pkg
```